<tool id="pe_histogram_output_stats" name="Paired-end Histogram output statistics" version="1.0.0">
    <description></description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <command>
        <![CDATA[
            <expand macro="non_ready_states" />
            #while $input_png.dataset.state in $non_ready_states:
                time.sleep(60)
            #end while
            #while $input_tabular.dataset.state in $non_ready_states:
                time.sleep(60)
            #end while
            <expand macro="single_input_cmd_start" />
            python $__tool_directory__/pe_histogram_output_stats.py
            --config_file $__tool_directory__/stats_config.ini
            --input_png "$input_png"
            --input_png_id "$__app__.security.encode_id($input_png.id)"
            --input_png_datatype "$input_png.ext"
            --input_tabular "$input_tabular"
            --input_tabular_id "$__app__.security.encode_id($input_tabular.id)"
            --input_tabular_datatype "$input_tabular.ext"
            --dbkey "$input_png.metadata.dbkey"
            --history_id "$history_id"
            --history_name "$history_name"
            --tool_id "$tool_id"
            --tool_parameters "$tool_parameters"
            --user_email "$__user_email__"
            #if $workflow_step is not None:
                --workflow_step_id "$__app__.security.encode_id($workflow_step.id)"
            #end if
            --output "$output"
        ]]>
    </command>
    <inputs>
        <param name="input_png" type="data" format="png" label="PNG input" >
            <validator type="dataset_ok_validator" />
        </param>
        <param name="input_tabular" type="data" format="tabular" label="Tabular input" >
            <validator type="dataset_ok_validator" />
        </param>
    </inputs>
    <outputs>
        <data name="output" format="txt" />
    </outputs>
    <tests>
    </tests>
    <help>
**What it does**

Gets the display URI for the HTML output of the **Paired-end histogram of insert size frequency** tool in the
**CEGR Galaxy ChIP-exo** pipeline.  A JSON dictionary containing the run, sample and this URI is sent via
a POST to the PEGR REST API where the information is stored to support the CEGR ChIP-exo statistics reports.
    </help>
    <expand macro="citations" />
</tool>
